{% extends 'public/base.html' %}
{% load static %}

{% block content %}

<!-- Hero institucional -->
<section class="hero">
  <h1>Porta Informática</h1>
  <p>Soluciones tecnológicas para tu mundo</p>
</section>

<!-- Barra de búsqueda y filtro -->
<section class="filtros" data-aos="fade-up">
  <form method="get" action="{% url 'home' %}">
    <input type="text" name="q" placeholder="Buscar producto..." value="{{ request.GET.q }}">
    <select name="categoria">
      <option value="">Todas las categorías</option>
      <option value="Notebooks" {% if request.GET.categoria == "Notebooks" %}selected{% endif %}>Notebooks</option>
      <option value="Periféricos" {% if request.GET.categoria == "Periféricos" %}selected{% endif %}>Periféricos</option>
      <option value="Componentes" {% if request.GET.categoria == "Componentes" %}selected{% endif %}>Componentes</option>
    </select>
    <button type="submit">Filtrar</button>
  </form>
</section>

<!-- Catálogo dinámico -->
<section class="catalogo" data-aos="fade-up">
  <h2>Catálogo de Productos</h2>
  <div class="product-list">
    {% for producto in productos %}
      <div class="product-card">

        <!-- Mostrar imagen del producto o imagen por defecto -->
        {% if producto.imagen %}
          <img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}">
        {% else %}
          <img src="{% static 'img/placeholder.png' %}" alt="Sin imagen">
        {% endif %}

        <h4>{{ producto.nombre }}</h4>
        <p>${{ producto.precio }}</p>
        <input type="number" min="1" value="1" id="cantidad_{{ producto.id }}">
        <button onclick="agregarAlPedido('{{ producto.nombre|escapejs }}', {{ producto.precio|floatformat:2 }}, {{ producto.id }})">
            Agregar al pedido
        </button>

    {% empty %}
      <p>No se encontraron productos con esos criterios.</p>
    {% endfor %}
  </div>
</section>

{% endblock %}
